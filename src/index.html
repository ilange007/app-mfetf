<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>AppMfetf</title>
  <base href="/">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Tu Familia es Mi Familia</title>
        <link rel="icon" type="image/x-icon" href="favicon.ico">
        <link rel="stylesheet" href="styles.css"> <!-- Enlace a la hoja de estilos externa -->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
        <script>
            $(document).ready(function(){
                $("#myInput").on("keyup", function() {
                    var value = $(this).val().toLowerCase();
                    $("#myTable tr").filter(function() {
                      $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
                    });
                  });
                });
            $(document).ready(function(){
                $("#toggleFormBtn").click(function(){
                    $("#formBeneficiario").toggle(); // Alterna entre mostrar/ocultar el formulario
                });
            });


            // Para editar la fila de la tabla
            $(document).ready(function() {
                // Evento para hacer clic en el botón "Editar"
                $(document).on("click", ".btnEditar", function() {
                    // Obtener la fila seleccionada
                    var $fila = $(this).closest("tr");

                    // Obtener los valores actuales de la fila
                    var producto = $fila.find("td:eq(0)").text();
                    var medida = $fila.find("td:eq(1)").text();
                    var costo = $fila.find("td:eq(2)").text();
                    var canasta = $fila.find("td:eq(3)").text();
                    var stock = $fila.find("td:eq(4)").text();


                    // Reemplazar el contenido de las celdas con campos de entrada
                    $fila.find("td:eq(0)").html('<input type="text" value="' + producto + '" />');
                    $fila.find("td:eq(1)").html('<input type="text" value="' + medida + '" />');
                    $fila.find("td:eq(2)").html('<input type="number" step="0.01" value="' + costo + '" />');
                    $fila.find("td:eq(3)").html('<input type="number" value="' + canasta + '" />');
                    $fila.find("td:eq(4)").html('<input type="number" step="0.01" value="' + stock + '" />');

                    // Cambiar el botón a "Guardar"
                    $(this).removeClass("btnEditar").addClass("btnGuardar");

                    // Evento para guardar la fila
                    $(document).on("click", ".btnGuardar", function() {
                        // Obtener los nuevos valores de los campos de entrada
                        var nuevoProducto = $fila.find("td:eq(0) input").val();
                        var nuevaMedida = $fila.find("td:eq(1) input").val();
                        var nuevoCosto = parseFloat($fila.find("td:eq(2) input").val()).toFixed(2);
                        var nuevaCanasta = $fila.find("td:eq(3) input").val();
                        var nuevoStock = parseFloat($fila.find("td:eq(4) input").val()).toFixed(2);

                        // Restaurar los valores a las celdas
                        $fila.find("td:eq(0)").text(nuevoProducto);
                        $fila.find("td:eq(1)").text(nuevaMedida);
                        $fila.find("td:eq(2)").text(nuevoCosto);
                        $fila.find("td:eq(3)").text(nuevaCanasta);
                        $fila.find("td:eq(4)").text(nuevoStock);

                        // Cambiar el botón de nuevo a "Editar"
                        $(this).removeClass("btnGuardar").addClass("btnEditar");
                    });
                });
            });

        </script>
</head>
<body>
  <app-root _nroot></app-root>
</body>
</html>
